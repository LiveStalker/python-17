## Домашнее задание

Дата: 28.07.2017

### Задача

Задание: Разработать веб-сервер. Разрешается использовать библиотеки помогающие 
реализовать асинхронную обработку соединений, запрещается использовать библиотеки 
реализующие какую-либо часть обработки HTTP. Провести нагрузочное тестирование, 
проверку стабильности и корректности работы. Если сервер асинхронный, то 
обязательно использовать [epoll](https://github.com/m13253/python-asyncore-epoll).

Веб-сервер должен уметь:

* Масштабироваться на несколько worker'ов
* Числов worker'ов задается аргументом командной строки -w
* Отвечать 200 или 404 на GET-запросы и HEAD-запросы
* Отвечать 405 на прочие запросы
* Возвращать файлы по произвольному пути в DOCUMENT_ROOT.
* Вызов /.html должен возвращать содердимое DOCUMENT_ROOT/.html
* DOCUMENT_ROOT задается аргументом командной строки -r
* Возвращать index.html как индекс директории
* Вызов // должен возвращать DOCUMENT_ROOT//index.html
* Отвечать следующими заголовками для успешных GET-запросов: 
  Date, Server, Content-Length, Content-Type, Connection
* Корректный Content-Type для: .html, .css, .js, .jpg, .jpeg, .png, .gif, .swf
* Понимать пробелы и %XX в именах файлов
* Опционально: демонизироваться через init-скрипт. init-скрипт должен 
  поддерживать команды start, stop, restart, status. При вызове без 
  параметров init-скрипт должен выводить список доступных команд


### Что проверять?

* [Проходят тестыr](https://github.com/s-stupnikov/http-test-suite).
* http://localhost/httptest/wikipedia_russia.html корректно показывается в браузере.
* Нагрузочное тестирование: запускаем ab -n 50000 -c 100 -r http://localhost:8080/ 
  и смотрим результат (опционально: вместо ab воспользоваться wrk)

### Что на выходе?

* сам сервер в httpd.py. Это точка входа (т.е. этот файлик обязательно 
  должен быть), можно разбить на модули.
* опциональный init-скрипт
* README.md с описанием использованной архитектуры (в двух словах: 
  asynchronous/thread pool/prefork/...) и результатами нагрузочного тестирования
  
## Описание решения

### Необходимая литература

* [Hypertext Transfer Protocol -- HTTP/1.0](https://tools.ietf.org/html/rfc1945)
* [Hypertext Transfer Protocol -- HTTP/1.1](https://tools.ietf.org/html/rfc2616)
